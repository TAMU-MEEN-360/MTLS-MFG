<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Engineering Stress–Strain (Mild Carbon Steel)</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 40px;
            background-color: #f3f4f6;
            color: #111827;
        }
        h1 {
            text-align: center;
            margin-bottom: 6px;
        }
        p {
            text-align: center;
            color: #374151;
            margin-top: 0;
        }
        .plot-wrap {
            max-width: 1050px;
            margin: 0 auto 22px;
            background: white;
            border-radius: 14px;
            padding: 18px;
            box-shadow: 0 8px 20px rgba(0,0,0,0.08);
        }
        #curveMain, #curveZoom {
            width: 100%;
            height: 560px;
        }
        a {
            display: block;
            text-align: center;
            margin-top: 18px;
            color: #4f46e5;
            text-decoration: none;
        }
        .hint {
            font-size: 13px;
            text-align: center;
            color: #6b7280;
            margin: 10px 0 0;
        }
    </style>
</head>
<body>

<h1>Engineering Stress–Strain (Mild Carbon Steel)</h1>
<p>Hover over the points to identify material properties.</p>

<div class="plot-wrap">
    <div id="curveMain"></div>
    <div class="hint">Tip: Hover over the markers to see what each point represents.</div>
</div>

<div class="plot-wrap">
    <div id="curveZoom"></div>
    <div class="hint">Zoomed view shows the 0.2% offset line and early-region properties more clearly.</div>
</div>

<a href="index.html">← Back to Home</a>

<script>
    const E = 200000;
    const sigma_y = 225;
    const sigma_uts = 430;
    const eps_prop = 0.0011;
    const sigma_prop = E * eps_prop;
    const eps_y = 0.003125;

    const curve = [
        {x: 0.0, y: 0},
        {x: eps_prop, y: sigma_prop},
        {x: eps_y, y: sigma_y},
        {x: 0.010, y: 255},
        {x: 0.030, y: 310},
        {x: 0.070, y: 380},
        {x: 0.120, y: sigma_uts},
        {x: 0.180, y: 410},
        {x: 0.250, y: 340}
    ];

    // -----------------------------
    // 0.2% Offset Line (STOP at yield)
    // -----------------------------
    function offsetLine(e0, eEnd, step) {
        const xs = [], ys = [];
        for (let e = e0; e <= eEnd; e += step) {
            xs.push(e);
            ys.push(E * (e - 0.002));
        }
        return { xs, ys };
    }

    const offset = offsetLine(0.002, eps_y, 0.00005);

    const ptProp = { x: eps_prop, y: sigma_prop };
    const ptYield = { x: eps_y, y: sigma_y };
    const ptUTS = { x: 0.120, y: sigma_uts };
    const ptFrac = { x: 0.250, y: 340 };

    // -----------------------------
    // Tensile Toughness (Area)
    // -----------------------------
    const toughnessTrace = {
        x: curve.map(p => p.x),
        y: curve.map(p => p.y),
        mode: 'lines',
        fill: 'tozeroy',
        fillcolor: 'rgba(59,130,246,0.15)',
        line: { width: 0 },
        hoverinfo: 'skip'
    };

    const toughnessLabel = {
        x: [0.12],
        y: [200],
        mode: 'markers',
        marker: { size: 12, color: 'rgba(59,130,246,0.6)' },
        text: ['<b>Tensile Toughness</b><br>Area under stress–strain curve'],
        hovertemplate: '%{text}<extra></extra>'
    };

    // -----------------------------
    // Elastic-slope line through fracture
    // -----------------------------
    const epsDuctility = ptFrac.x - ptFrac.y / E;

    const fractureSlopeTrace = {
        x: [epsDuctility, ptFrac.x],
        y: [0, ptFrac.y],
        mode: 'lines',
        line: { dash: 'dot', width: 2, color: 'purple' },
        hoverinfo: 'skip'
    };

    const fractureSlopeLabel = {
        x: [(epsDuctility + ptFrac.x) / 2],
        y: [ptFrac.y / 2],
        mode: 'markers',
        marker: { size: 10, color: 'purple' },
        text: ['<b>Slope = Elastic Modulus (E)</b>'],
        hovertemplate: '%{text}<extra></extra>'
    };

    // -----------------------------
    // Elastic modulus label on offset line (CENTERED)
    // -----------------------------
    const epsOffsetMid = (0.002 + eps_y) / 2;
    const sigmaOffsetMid = E * (epsOffsetMid - 0.002);

    const offsetSlopeLabel = {
        x: [epsOffsetMid],
        y: [sigmaOffsetMid],
        mode: 'markers',
        marker: { size: 10, color: 'green' },
        text: ['<b>Slope = Elastic Modulus (E)</b>'],
        hovertemplate: '%{text}<extra></extra>'
    };

    // -----------------------------
    // Elastic modulus label on proportional region
    // -----------------------------
    const propSlopeLabel = {
        x: [0.0007],
        y: [E * 0.0007],
        mode: 'markers',
        marker: { size: 10, color: 'red' },
        text: ['<b>Slope = Elastic Modulus (E)</b>'],
        hovertemplate: '%{text}<extra></extra>'
    };

    // -----------------------------
    // Main traces
    // -----------------------------
    const curveTrace = {
        x: curve.map(p => p.x),
        y: curve.map(p => p.y),
        mode: 'lines',
        line: { width: 4 },
        hoverinfo: 'skip'
    };

    const offsetTrace = {
        x: offset.xs,
        y: offset.ys,
        mode: 'lines',
        line: { dash: 'dash', width: 2, color: 'green' },
        hoverinfo: 'skip'
    };

    const pointsTrace = {
        x: [ptProp.x, ptYield.x, ptUTS.x, ptFrac.x],
        y: [ptProp.y, ptYield.y, ptUTS.y, ptFrac.y],
        mode: 'markers',
        marker: { size: 10, color: 'red' },
        text: [
            '<b>Proportional Limit</b>',
            '<b>Yield Strength</b>',
            '<b>Ultimate Tensile Strength</b>',
            '<b>Fracture</b>'
        ],
        hovertemplate: '%{text}<extra></extra>'
    };

    function layout(zoom) {
        return {
            xaxis: { title: 'Strain, ε', range: zoom ? [0, 0.01] : [0, 0.27] },
            yaxis: { title: 'Stress, σ (MPa)', range: [0, 500] },
            margin: { t: 30, l: 70, r: 20, b: 70 },
            showlegend: false
        };
    }

    Plotly.newPlot(
        'curveMain',
        [
            toughnessTrace,
            curveTrace,
            offsetTrace,
            fractureSlopeTrace,
            toughnessLabel,
            fractureSlopeLabel,
            offsetSlopeLabel,
            propSlopeLabel,
            pointsTrace
        ],
        layout(false),
        { responsive: true }
    );

    Plotly.newPlot(
        'curveZoom',
        [
            curveTrace,
            offsetTrace,
            fractureSlopeTrace,
            offsetSlopeLabel,
            propSlopeLabel,
            pointsTrace
        ],
        layout(true),
        { responsive: true }
    );
</script>
</body>
</html>
