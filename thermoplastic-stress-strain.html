<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Engineering Stress–Strain (Thermoplastic)</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f3f4f6;
      color: #111827;
    }
    h1 { text-align: center; margin-bottom: 6px; }
    p  { text-align: center; color: #374151; margin-top: 0; }

    .plot-wrap {
      max-width: 1050px;
      margin: 0 auto 22px;
      background: white;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    #curveMain, #curveZoom { width: 100%; height: 560px; }

    a {
      display: block;
      text-align: center;
      margin-top: 18px;
      color: #4f46e5;
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }

    .hint {
      font-size: 13px;
      text-align: center;
      color: #6b7280;
      margin: 10px 0 0;
    }
  </style>
</head>

<body>
  <h1>Engineering Stress–Strain (Thermoplastic)</h1>
  <p>Quiz yourself: hover over labeled points/regions to reveal what they represent.</p>

  <div class="plot-wrap">
    <div id="curveMain"></div>
    <div class="hint">Tip: Hover over each label marker to learn what that region of the polymer curve means.</div>
  </div>

  <div class="plot-wrap">
    <div id="curveZoom"></div>
    <div class="hint">Zoomed view focuses on the early curve, yield peak, and necking.</div>
  </div>

  <a href="index.html">← Back to Home</a>

  <script>
    // ------------------------------------------------------------
    // Thermoplastic engineering stress–strain (matches screenshot shape)
    // Labels included (screenshot-style):
    // - Linear elastic deformation
    // - Nonlinear elastic deformation
    // - Yield strength
    // - Necking
    // - Plastic deformation
    // - Tensile strength (UTS)
    // Plus: Failure point marker (popup calls it Failure)
    // ------------------------------------------------------------

    // Teaching values (generic ductile thermoplastic)
    // x is strain (in/in), displayed as % on the plot.
    const E = 1200;              // MPa (initial modulus; polymer-like)
    const eps_y = 0.50;          // 50% strain (yield peak)
    const sigma_y = 40;          // MPa (yield peak stress)
    const sigma_plateau = 26;    // MPa (drawing/plateau stress after necking)
    const eps_uts = 2.80;        // 280% strain (UTS near right side)
    const sigma_uts = 58;        // MPa (UTS)
    const eps_fail = 3.00;       // 300% strain (failure)
    const sigma_fail = 52;       // MPa (stress at failure)

    // ------------------------------------------------------------
    // Curve points (hand-shaped to match screenshot style):
    // linear elastic -> nonlinear elastic -> yield peak -> necking drop
    // -> plastic plateau -> strain hardening -> UTS -> failure
    // ------------------------------------------------------------
    const curve = [
      // Linear elastic (small strain)
      { x: 0.00, y: 0 },
      { x: 0.03, y: E * 0.03 },     // ~3% strain

      // Nonlinear elastic (curving up toward yield)
      { x: 0.08, y: 10 },
      { x: 0.15, y: 16 },
      { x: 0.25, y: 23 },
      { x: 0.35, y: 30 },
      { x: 0.45, y: 36 },

      // Yield peak (~50%)
      { x: eps_y, y: sigma_y },

      // Necking drop
      { x: 0.62, y: 27 },

      // Plastic deformation (drawing plateau)
      { x: 0.80, y: sigma_plateau },
      { x: 2.00, y: sigma_plateau },

      // Strain hardening up to UTS ("tensile strength" label in screenshot)
      { x: 2.30, y: 33 },
      { x: 2.55, y: 42 },
      { x: eps_uts, y: sigma_uts },

      // Failure (end)
      { x: eps_fail, y: sigma_fail }
    ];

    // ------------------------------------------------------------
    // Label marker locations (placed to mirror screenshot text placement)
    // ------------------------------------------------------------
    const ptLinearElastic = { x: 0.02, y: E * 0.02 };
    const ptNonlinearElastic = { x: 0.25, y: 23 };
    const ptYield = { x: eps_y, y: sigma_y };
    const ptNecking = { x: 0.62, y: 27 };
    const ptPlastic = { x: 1.50, y: sigma_plateau };
    const ptUTS = { x: eps_uts, y: sigma_uts };
    const ptFailure = { x: eps_fail, y: sigma_fail };

    // ------------------------------------------------------------
    // Popup text (same format as your current popups)
    // ------------------------------------------------------------
    const hoverLinearElastic =
      `<b>Linear Elastic Deformation</b><br>` +
      `At small strain, stress is ~proportional to strain.<br>` +
      `<b>σ = E·ε</b><br>` +
      `E is the tensile modulus (initial slope).`;

    const hoverNonlinearElastic =
      `<b>Nonlinear Elastic Deformation</b><br>` +
      `The curve becomes non-linear, but much of the deformation can still be recoverable.<br>` +
      `Polymers often show nonlinearity early due to chain uncoiling / viscoelastic effects.`;

    const hoverYield =
      `<b>Yield Strength</b><br>` +
      `First local maximum in <i>engineering</i> stress.<br>` +
      `Marks the onset of significant permanent (plastic) deformation.<br>` +
      `After this, many ductile thermoplastics show a stress drop.`;

    const hoverNecking =
      `<b>Necking</b><br>` +
      `Deformation localizes into a reduced-area region (a <b>neck</b>).<br>` +
      `Engineering stress often drops because the specimen’s cross-section reduces in the neck.<br>` +
      `Necking commonly transitions into a long drawing plateau.`;

    const hoverPlastic =
      `<b>Plastic Deformation</b><br>` +
      `Large, permanent deformation occurs.<br>` +
      `In many thermoplastics, this includes <b>cold drawing</b> where the neck propagates<br>` +
      `and stress stays ~constant over a wide strain range (plateau).`;

    const hoverUTS =
      `<b>Tensile Strength (UTS)</b><br>` +
      `Maximum <i>engineering</i> stress on the curve.<br>` +
      `Also called the <b>ultimate tensile strength</b> (UTS).<br>` +
      `For polymers, the rise toward UTS is often due to <b>strain hardening</b> (chain alignment).`;

    const hoverFailure =
      `<b>Failure</b><br>` +
      `Final separation of the specimen after large plastic deformation.<br>` +
      `Often reported as tensile strength at break and strain at break.<br>` +
      `Failure may occur by ductile tearing, neck rupture, or brittle fracture depending on conditions.`;

    // ------------------------------------------------------------
    // Traces
    // ------------------------------------------------------------
    const curveTrace = {
      x: curve.map(p => p.x),
      y: curve.map(p => p.y),
      mode: 'lines',
      line: { width: 4 },
      hoverinfo: 'skip'
    };

    // Only screenshot-style labels (plus failure marker)
    const labelsTrace = {
      x: [
        ptLinearElastic.x,
        ptNonlinearElastic.x,
        ptYield.x,
        ptNecking.x,
        ptPlastic.x,
        ptUTS.x,
        ptFailure.x
      ],
      y: [
        ptLinearElastic.y,
        ptNonlinearElastic.y,
        ptYield.y,
        ptNecking.y,
        ptPlastic.y,
        ptUTS.y,
        ptFailure.y
      ],
      mode: 'markers',
      marker: { size: 10, color: 'red' },
      text: [
        hoverLinearElastic,
        hoverNonlinearElastic,
        hoverYield,
        hoverNecking,
        hoverPlastic,
        hoverUTS,
        hoverFailure
      ],
      hovertemplate: '%{text}<extra></extra>'
    };

    // ------------------------------------------------------------
    // Layout
    // Full plot: 0–320% strain; Zoom plot: up to ~80% to include yield+necking
    // ------------------------------------------------------------
    function layout(isZoom) {
      return {
        xaxis: {
          title: 'Engineering Strain, ε (%)',
          range: isZoom ? [0, 80] : [0, 320],
          tickformat: '.0f'
        },
        yaxis: {
          title: 'Engineering Stress, σ (MPa)',
          range: isZoom ? [0, 60] : [0, 70]
        },
        margin: { t: 30, l: 70, r: 20, b: 70 },
        showlegend: false
      };
    }

    // Convert x from (in/in) to (%) for plotting
    function toPercentTrace(trace) {
      const t = JSON.parse(JSON.stringify(trace));
      if (t.x) t.x = t.x.map(v => v * 100);
      return t;
    }

    // ------------------------------------------------------------
    // Render plots
    // ------------------------------------------------------------
    Plotly.newPlot(
      'curveMain',
      [
        toPercentTrace(curveTrace),
        toPercentTrace(labelsTrace)
      ],
      layout(false),
      { responsive: true }
    );

    Plotly.newPlot(
      'curveZoom',
      [
        toPercentTrace(curveTrace),
        toPercentTrace(labelsTrace)
      ],
      layout(true),
      { responsive: true }
    );
  </script>
</body>
</html>
