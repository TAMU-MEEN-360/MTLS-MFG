<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Engineering Stress–Strain (Thermoplastic)</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 40px;
      background-color: #f3f4f6;
      color: #111827;
    }
    h1 { text-align: center; margin-bottom: 6px; }
    p  { text-align: center; color: #374151; margin-top: 0; }

    .plot-wrap {
      max-width: 1050px;
      margin: 0 auto 22px;
      background: white;
      border-radius: 14px;
      padding: 18px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.08);
    }
    #curveMain, #curveZoom { width: 100%; height: 560px; }

    a {
      display: block;
      text-align: center;
      margin-top: 18px;
      color: #4f46e5;
      text-decoration: none;
    }
    a:hover { text-decoration: underline; }

    .hint {
      font-size: 13px;
      text-align: center;
      color: #6b7280;
      margin: 10px 0 0;
    }
  </style>
</head>

<body>
  <h1>Engineering Stress–Strain (Thermoplastic)</h1>
  <p>Quiz yourself: hover over labeled points/regions to reveal what they represent.</p>

  <div class="plot-wrap">
    <div id="curveMain"></div>
    <div class="hint">Tip: Hover over each label marker to learn what that region of the polymer curve means.</div>
  </div>

  <div class="plot-wrap">
    <div id="curveZoom"></div>
    <div class="hint">Zoomed view focuses on the elastic region and the yield peak.</div>
  </div>

  <a href="index.html">← Back to Home</a>

  <script>
    // ------------------------------------------------------------
    // Teaching values for a ductile thermoplastic (generic)
    // Goal: match the classic thermoplastic shape:
    // elastic → yield peak → drop → long drawing plateau → strain hardening → UTS → fracture
    // ------------------------------------------------------------
    const E = 1200;         // MPa (1.2 GPa – intentionally lower so early slope looks polymer-ish)
    const eps_y = 0.08;     // 8% strain at yield peak (matches the “little peak” style)
    const sigma_y = 38;     // MPa yield peak
    const sigma_uts = 58;   // MPa UTS
    const eps_uts = 2.70;   // 270% strain at UTS
    const eps_frac = 3.00;  // 300% strain at fracture

    // Plateau stress (cold drawing)
    const sigma_plateau = 26;

    // ------------------------------------------------------------
    // Curve points (engineering stress–strain)
    // x is in in/in; we display x-axis as % later
    // ------------------------------------------------------------
    const curve = [
      // Elastic-ish start (slightly nonlinear before yield can happen in polymers,
      // but we keep it simple + readable)
      { x: 0.00, y: 0 },
      { x: 0.02, y: E * 0.02 },      // 2%
      { x: 0.05, y: 30 },            // 5% (softening from perfectly linear look)
      { x: eps_y, y: sigma_y },      // yield peak (~8%)

      // Post-yield drop into drawing plateau
      { x: 0.12, y: sigma_plateau }, // 12% (drop)
      { x: 0.30, y: sigma_plateau }, // 30% (plateau begins)
      { x: 2.00, y: sigma_plateau }, // 200% (long plateau)

      // Strain hardening up to UTS
      { x: 2.30, y: 33 },
      { x: 2.50, y: 42 },
      { x: eps_uts, y: sigma_uts },  // UTS (~270%)

      // Slight drop to fracture
      { x: eps_frac, y: 52 }         // fracture (~300%)
    ];

    // ------------------------------------------------------------
    // “Screenshot-style” labels only
    // ------------------------------------------------------------

    // Choose label marker locations (not necessarily exact curve vertices)
    const ptElastic = { x: 0.03, y: E * 0.03 };     // in elastic region
    const ptYield   = { x: eps_y, y: sigma_y };     // yield peak
    const ptDraw    = { x: 0.80, y: sigma_plateau };// in drawing plateau
    const ptHard    = { x: 2.45, y: 40 };           // strain hardening region
    const ptUTS     = { x: eps_uts, y: sigma_uts }; // UTS
    const ptFrac    = { x: eps_frac, y: 52 };       // fracture

    // ------------------------------------------------------------
    // Popup text (same formatting style as your current popups)
    // Include short explanation + key equations where appropriate.
    // ------------------------------------------------------------
    const hoverElastic =
      `<b>Elastic Region</b><br>` +
      `Deformation is mostly reversible (material returns close to original shape).<br>` +
      `At small strains, an approximate linear relationship is often used:<br>` +
      `<b>σ = E·ε</b><br>` +
      `Here, E is the tensile modulus (slope of the initial curve).`;

    const hoverYield =
      `<b>Yield Point (Peak)</b><br>` +
      `First local maximum in <i>engineering</i> stress.<br>` +
      `Marks the start of significant permanent (plastic) deformation.<br>` +
      `After yield, many ductile thermoplastics show a stress drop as a neck forms.`;

    const hoverNeckDraw =
      `<b>Necking / Cold Drawing (Plateau)</b><br>` +
      `After the yield peak, the specimen often forms a localized neck.<br>` +
      `During <b>cold drawing</b>, the neck propagates and the stress stays ~constant<br>` +
      `over a large strain range (the long plateau).`;

    const hoverHardening =
      `<b>Strain Hardening</b><br>` +
      `At large strain, polymer chains become more aligned/taut.<br>` +
      `The material resists further deformation more strongly, so stress rises again.<br>` +
      `This region leads up to the maximum engineering stress (UTS).`;

    const hoverUTS =
      `<b>Ultimate Tensile Strength (UTS)</b><br>` +
      `Maximum <i>engineering</i> stress on the curve.<br>` +
      `UTS is the peak value of σ on the engineering σ–ε plot.`;

    const hoverFracture =
      `<b>Failure</b><br>` +
      `Final failure of the specimen after large plastic deformation.<br>` +
      `Reported as tensile strength at break and strain at break.`;

    // ------------------------------------------------------------
    // Plot traces
    // ------------------------------------------------------------
    const curveTrace = {
      x: curve.map(p => p.x),
      y: curve.map(p => p.y),
      mode: 'lines',
      line: { width: 4 },
      hoverinfo: 'skip'
    };

    // Label markers only (as requested)
    const labelsTrace = {
      x: [ptElastic.x, ptYield.x, ptDraw.x, ptHard.x, ptUTS.x, ptFrac.x],
      y: [ptElastic.y, ptYield.y, ptDraw.y, ptHard.y, ptUTS.y, ptFrac.y],
      mode: 'markers',
      marker: { size: 10, color: 'red' },
      text: [hoverElastic, hoverYield, hoverNeckDraw, hoverHardening, hoverUTS, hoverFracture],
      hovertemplate: '%{text}<extra></extra>'
    };

    // ------------------------------------------------------------
    // Layout (x-axis displayed as % strain)
    // Full: 0–320% like your steel page style; Zoom: 0–20% for yield region
    // ------------------------------------------------------------
    function layout(isZoom) {
      return {
        xaxis: {
          title: 'Engineering Strain, ε (%)',
          range: isZoom ? [0, 20] : [0, 320],
          tickformat: '.0f'
        },
        yaxis: {
          title: 'Engineering Stress, σ (MPa)',
          range: isZoom ? [0, 55] : [0, 70]
        },
        margin: { t: 30, l: 70, r: 20, b: 70 },
        showlegend: false
      };
    }

    // Convert x from (in/in) to (%) for plotting
    function toPercentTrace(trace) {
      const t = JSON.parse(JSON.stringify(trace));
      if (t.x) t.x = t.x.map(v => v * 100);
      return t;
    }

    // ------------------------------------------------------------
    // Render plots
    // ------------------------------------------------------------
    Plotly.newPlot(
      'curveMain',
      [
        toPercentTrace(curveTrace),
        toPercentTrace(labelsTrace)
      ],
      layout(false),
      { responsive: true }
    );

    Plotly.newPlot(
      'curveZoom',
      [
        toPercentTrace(curveTrace),
        toPercentTrace(labelsTrace)
      ],
      layout(true),
      { responsive: true }
    );
  </script>
</body>
</html>
